<!DOCTYPE html>
<html>

<head>
  <title>Image Selector</title>
  <title>Image Selector - Inter-subjects</title>
  <!-- Logo -->
  <link rel="icon" type="image/svg"
    href="https://mindig.io/wp-content/uploads/2023/01/cropped-Asset-4@3x-1-32x32.png" />
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-[url('assets/brain-bg.jpg')] bg-no-repeat bg-cover bg-center bg-fixed">
  <div class="w-full min-h-screen backdrop-blur-md flex flex-col items-center justify-center p-20">
    <div class="mx-auto w-3/4 p-10 rounded-lg bg-white/10">
      <h1 class="text-white text-2xl font-bold mb-4">Select Image</h1>
      <div class="mb-4">
        <label for="session" class="block mb-1 text-sm font-medium text-white">Session:</label>
        <select id="session" name="session"
          class="bg-gray-700 border border-gray-600 placeholder-gray-400 text-white text-sm rounded-lg block w-full p-2.5">
          <option value="M3">M3</option>
          <option value="M6">M6</option>
        </select>
      </div>
      <div class="mb-4">
        <label for="condition" class="block mb-1 text-sm font-medium text-white">Condition:</label>
        <select id="condition" name="condition"
          class="bg-gray-700 border border-gray-600 placeholder-gray-400 text-white text-sm rounded-lg block w-full p-2.5">
          <option value="rest_stimOFF">rest_stimOFF</option>
          <option value="mvt_stimOFF">mvt_stimOFF</option>
          <option value="rest_stimON">rest_stimON</option>
          <option value="mvt_stimON">mvt_stimON</option>
        </select>
      </div>
      <div class="mb-4">
        <label for="patient" class="block mb-1 text-sm font-medium text-white">Patient:</label>
        <select id="patient" name="patient"
          class="bg-gray-700 border border-gray-600 placeholder-gray-400 text-white text-sm rounded-lg block w-full p-2.5">
          >
          <option value="1">Patient 1</option>
          <option value="2">Patient 2</option>
          <option value="3">Patient 3</option>
          <option value="4">Patient 4</option>
          <option value="5">Patient 5</option>
          <option value="6">Patient 6</option>
          <option value="7">Patient 7</option>
          <option value="8">Patient 8</option>
          <option value="9">Patient 9</option>
          <option value="10">Patient 10</option>
          <option value="avg">AVG Patient</option>
        </select>
      </div>
      <div class="mb-4">
        <label for="fband" class="block mb-1 text-sm font-medium text-white">Frequency band:</label>
        <select id="fband" name="fband"
          class="bg-gray-700 border border-gray-600 placeholder-gray-400 text-white text-sm rounded-lg block w-full p-2.5">
          <option value="theta">Theta</option>
          <option value="alpha">Alpha</option>
          <option value="beta">Beta</option>
          <option value="gamma">Gamma</option>
        </select>
      </div>

      <button onclick="showImage()"
        class="text-white bg-gray-800 border border-gray-600 hover:bg-gray-700 hover:border-gray-600 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2">
        Show Image
      </button>
      <button onclick="saveImages()"
        class="text-white bg-gray-800 border border-gray-600 hover:bg-gray-700 hover:border-gray-600 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2">
        Save Images
      </button>

      <div class="flex flex-row justify-around items-center gap-2 mt-4">
        <div class="relative w-1/2">
          <img id="selectedImage1" src="" alt="Selected Image 1" style="display: none" />
        </div>
      </div>
    </div>

    <script>
      function showImage() {
        var session = document.getElementById("session").value;
        var condition = document.getElementById("condition").value;
        var patient = document.getElementById("patient").value;
        var fband = document.getElementById("fband").value;

        var imagePath1 = 'Figures/' + session + '/coherence_heatmap_patient_' + patient + '_' + condition + '_' + fband + '.png';

        var img1 = document.getElementById("selectedImage1");

        img1.src = imagePath1;
        img1.style.display = "block";
      }

      function saveImages() {
        downloadImage('selectedImage1');
      }

      function downloadImage(imgId) {
        var img = document.getElementById(imgId);
        if (img && img.src) {
          var link = document.createElement('a');
          link.href = img.src;
          link.download = ''; // Leave download attribute empty to prompt user to name the file
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        } else {
          alert('No image to save for ' + imgId);
        }
      }
    </script>
</body>

</html>
